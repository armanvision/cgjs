!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a});var o={render:function(){console.log("renderer loading spritesheet ...")}};var i=document.querySelector("main").appendChild(document.createElement("canvas")),r=i.getContext("2d"),s=new Image,a={x:960,y:540},c={x:0,y:0},u=0,l=!1,f=1;function h(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;t/e>a.x/a.y?t=e*a.x/a.y:e=t*a.y/a.x,t>a.x&&(t=a.x,e=a.y),i.style.width=t+"px",i.style.height=e+"px",i.style.marginTop=-e/2+"px",i.style.marginLeft=-t/2+"px",i.width=t,i.height=e,f=t/a.x}i.style.width=a.x+"px",i.style.height=a.y+"px",i.style.marginTop=-a.y/2+"px",i.style.marginLeft=-a.x/2+"px",i.width=a.x,i.height=a.y,s.onload=function(){console.log("spritesheet loaded --rendering"),o.render=function(t){for(var e in l&&function(){r.save(),c.x=0,c.y=0,l.collider.transform.position.x+u/2+l.collider.transform.scale.x/2>a.x/2&&(c.x=(a.x/2+u/2-l.collider.transform.scale.x/2-l.collider.transform.position.x)*f,r.translate(c.x,0));l.collider.transform.position.y-l.collider.transform.scale.y<0&&(c.y=-(l.collider.transform.position.y-l.collider.transform.scale.y)*f,r.translate(0,c.y))}(),r.clearRect(-c.x,-c.y,i.width,i.height),t)t[e].sprite&&r.drawImage(s,t[e].sprite.position.x,t[e].sprite.position.y,t[e].sprite.scale.x,t[e].sprite.scale.y,t[e].transform.position.x*f,t[e].transform.position.y*f,t[e].transform.scale.x*f,t[e].transform.scale.y*f);l&&r.restore()}},s.src="images/spritesheet.png",h(),window.addEventListener("resize",h,!1),window.addEventListener("orientationchange",h,!1)},function(t,e,n){"use strict";function o(t,e){this.x=t||0,this.y=e||0}n.d(e,"a",function(){return o}),o.prototype.set=function(t,e){e||0===e?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)},o.prototype.zero=function(){this.x=0,this.y=0},o.prototype.add=function(t){this.x+=t.x,this.y+=t.y},o.prototype.multiply=function(t){this.x*=t,this.y*=t},o.prototype.equal=function(t){return this.x===t.x&&this.y===t.y},o.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.angle=function(){var t=180*Math.atan2(this.y,this.x)/Math.PI;return t<0&&(t=360+t),t},o.prototype.normalize=function(){var t=this.magnitude();t>0&&(this.x=this.x/t,this.y=this.y/t)},o.prototype.setLength=function(t){this.normalize(),this.multiply(t)}},function(t,e,n){"use strict";var o=n(1),i={},r=n(3);function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(e,"a",function(){return a});var a={};function c(t,e,n){var h=Object.create(c.prototype);return h.transform=u(0,0,1,1),h.velocity=new o.a,h.gravity=!1,e&&function(t,e,n,o,i,s,a,c,u){t.sprite=l(n,o,i,s),t.transform.scale.set(t.sprite.scale),t.animateable=e,t.sprite.lastWidth=i,e&&(t.animation=f(a,c,u),t.animate=function(t){if(!this.animation.speed)return;var e;if(this.animation.index+=this.animation.speed*t,this.animation.speed>0){var n=this.animation.frames,o=Math.floor(this.animation.index);if(e=o%n,this.animation.once&&o>=n)return void(this.animation.done=!0)}else e=0;this.sprite.position.x=e*this.sprite.scale.x}.bind(t),Object(r.b)(t.animate))}.apply(void 0,[h,n].concat(s(i[e]))),a[t]=h,a[t]}function u(t,e,n,i){var r=Object.create(u.prototype);return r.position=new o.a(t,e),r.scale=new o.a(n,i),r}function l(t,e,n,o){var i=Object.create(l.prototype);return Object.assign(i,u(t,e,n,o)),i}function f(t,e,n){var o=Object.create(f.prototype);return o.speed=t,o.frames=e,o.once=n,o.index=0,o.done=!1,o}c.prototype.setCollider=function(t){var e=this;i[t]?(this.collider={},this.collider.transform=u(0,0,i[t][2],i[t][3]),this.colliderOrigScale=new o.a(i[t][2],i[t][3]),this.colliderUpdate=function(t){return e.collider.transform.position.set(e.transform.position)},Object(r.b)(this.colliderUpdate)):console.log("ERROR: no sprite to assign to collider: "+t)},c.prototype.changeSprite=function(t){if(i[t]){var e=this.transform.scale.x/this.sprite.lastWidth;this.sprite.position.set(i[t][0],i[t][1]),this.sprite.scale.set(i[t][2],i[t][3]),this.transform.scale.x=this.sprite.scale.x*e,this.sprite.lastWidth=i[t][2],this.animateable&&(this.animation=f(i[t][4],i[t][5],i[t][6])),this.collider&&(this.collider.transform.scale.set(this.colliderOrigScale),this.collider.transform.scale.multiply(e),this.collider.transform.position.set(this.transform.position))}else console.log("ERROR: no sprite with name: "+t)}},function(t,e,n){"use strict";function o(t){"function"==typeof t&&r.push(t)}function i(t){"function"==typeof t&&s.push(t)}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});var r=[],s=[],a=1/120,c=0,u=0,l=0;console.log("starting main-loop"),function t(e){for(window.requestAnimationFrame(t),u=(e-c)/1e3,c=e,l+=u;l>=a;){for(var n=0;n<r.length;n++)(0,r[n])();l-=a}for(var o=0;o<s.length;o++)(0,s[o])(u)}(0)},function(t,e,n){"use strict";function o(t,e){return!(t.transform.position.x+t.transform.scale.x<=e.transform.position.x||t.transform.position.x>e.transform.position.x+e.transform.scale.x||t.transform.position.y+t.transform.scale.y<=e.transform.position.y||t.transform.position.y>e.transform.position.y+e.transform.scale.y)}n.d(e,"a",function(){return o})},function(t,e,n){var o={"./environment.js":6,"./fps/fps.js":7,"./player.js":8};function i(t){var e=r(t);return n(e)}function r(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=5},function(t,e,n){"use strict";n.r(e);n(1),n(2),n(0),n(4)},function(t,e,n){"use strict";n.r(e),n.d(e,"update",function(){return c});var o=i?document.body.appendChild(document.createElement("div")):0,i=!0,r=0,s=0,a=0;function c(t){i&&(s>.25&&(r=Math.round(a/s),o.textContent=r,s=0,a=0),s+=t,a++)}},function(t,e,n){"use strict";n.r(e);var o=n(1),i=(n(2),n(0)),r={position:new o.a},s={0:"lmb",1:"mmb",2:"rmb"};function a(t){var e=i.a.getBoundingClientRect();return{x:Math.round((t.clientX-e.left)*i.c.x/i.a.width),y:Math.round((t.clientY-e.top)*i.c.y/i.a.height)}}i.a.addEventListener("mousedown",function(t){t.preventDefault(),r[s[t.button]]=!0,r.position.set(a(t))},!1),i.a.addEventListener("mousemove",function(t){r.position.set(a(t))},!1),i.a.addEventListener("mouseup",function(t){r[s[t.button]]=!1},!1),i.a.oncontextmenu=function(){return!1};var c={},u={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",37:"left",39:"right",38:"up",40:"down",13:"enter",32:"space"};document.addEventListener("keydown",function(t){c[u[t.keyCode]]=!0},!1),document.addEventListener("keyup",function(t){c[u[t.keyCode]]=!1},!1);var l={pointerPos:new o.a,touchLeftPos:new o.a,touchRightPos:new o.a},f=-1,h=-1;function d(t){for(var e=0;e<t.changedTouches.length;e++)t.changedTouches[e].identifier===f?(l.touchLeft=!1,f=-1):t.changedTouches[e].identifier===h&&(l.touchRight=!1,h=-1)}function p(t){var e=i.a.getBoundingClientRect();return{x:Math.round((t.clientX-e.left)*i.c.x/i.a.width),y:Math.round((t.clientY-e.top)*i.c.y/i.a.height)}}i.a.addEventListener("touchstart",function(t){if(t.preventDefault(),t.targetTouches.length>0)for(var e=0;e<t.changedTouches.length;e++)p(t.changedTouches[e]).x<i.c.x/2?(l.touchLeft=!0,l.touchLeftPos.set(p(t.changedTouches[e])),f=t.changedTouches[e].identifier,l.pointerPos.set(p(t.changedTouches[e]))):p(t.changedTouches[e]).x>i.c.x/2&&(l.touchRight=!0,l.touchRightPos.set(p(t.changedTouches[e])),h=t.changedTouches[e].identifier,l.pointerPos.set(p(t.changedTouches[e])))},!1),i.a.addEventListener("touchmove",function(t){for(var e=0;e<t.changedTouches.length;e++)t.changedTouches[e].identifier===f?l.touchLeftPos.set(p(t.changedTouches[e])):t.changedTouches[e].identifier===h&&l.touchRightPos.set(p(t.changedTouches[e]))},!1),i.a.addEventListener("touchend",d,!1),i.a.addEventListener("touchcancel",d,!1)},function(t,e,n){"use strict";n.r(e);var o=n(3),i=n(2),r=(n(1),n(0)),s=n(4),a=10;function c(t,e){t.velocity.y+=a*e,t.transform.position.y+=a*e}function u(t,e){if(Object(s.a)(t,e)){var n=t.transform.position.x,o=t.transform.position.y,i=t.transform.position.x+t.transform.scale.x,r=t.transform.position.y+t.transform.scale.y,a=e.transform.position.x,c=e.transform.position.y,u=e.transform.position.x+e.transform.scale.x,l=e.transform.position.y+e.transform.scale.y,f=Math.abs(r-c);Math.abs(o-l);t.velocity.y>=0&&t.velocity.x>=0&&f>Math.abs(i-a)&&(t.velocity.x=0,t.transform.position.x=a-t.transform.scale.x),t.velocity.y>=0&&t.velocity.x<=0&&f>Math.abs(n-u)&&(t.velocity.x=0,t.transform.position.x=u),t.velocity.y>=0&&t.velocity.x>=0&&f<Math.abs(i-a)&&(t.velocity.zero(),t.transform.position.y=c-t.transform.scale.y),t.velocity.y>=0&&t.velocity.x<=0&&f<Math.abs(i-a)&&(t.velocity.zero(),t.transform.position.y=c-t.transform.scale.y),t.velocity.y<0&&t.velocity.x>0&&Math.abs(o-l)>Math.abs(i-a)&&(t.velocity.x=0,t.transform.position.x=a-t.transform.scale.x),t.velocity.y<0&&t.velocity.x>0&&Math.abs(o-l)<Math.abs(i-a)&&(t.velocity.zero(),t.transform.position.y=l),t.velocity.y<0&&t.velocity.x<0&&Math.abs(o-l)>Math.abs(u-n)&&(t.velocity.x=0,t.transform.position.x=u),t.velocity.y<0&&t.velocity.x<0&&Math.abs(o-l)<Math.abs(u-n)&&(t.velocity.zero(),t.transform.position.y=l)}}var l=n(5);l.keys().forEach(function(t){var e=l(t);e.fixedUpdate&&Object(o.a)(e.fixedUpdate),e.update&&Object(o.b)(e.update)}),console.log("added update funktions"),Object(o.b)(function(t){for(var e in i.a)if(i.a[e].gravity&&c(i.a[e],t),i.a[e].collider)for(var n in i.a)e!==n&&u(i.a[e],i.a[n])}),console.log("added physics engine"),Object(o.b)(function(){return r.b.render(i.a)})}]);